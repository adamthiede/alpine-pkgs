# Contributor: Miles Alan <m@milesalan.com>
# Maintainer: ScrumpyJack <scrumpyjack@st.ilet.to>
pkgname=neosurf
pkgver=0.11
_commit="433dafd46bc486bc8f5af93355787674d83105d0"
pkgrel=0
pkgdesc="A NetSurf fork with various improvements"
url="https://github.com/CobaltBSD/neosurf/"
arch="all"
license="GPL-2.0"
makedepends="cmake gperf flex bison pkgconf libxml2-dev libjpeg-turbo-dev curl-dev libpsl-dev libwebp-dev gtk+3.0-dev bash libpng-dev libxkbcommon-dev wayland-protocols wayland-dev expat-dev openssl-dev perl"
#subpackages="$pkgname-gtk3"
options="!check" # no tests
source="
$pkgname-$_commit.tar.gz::https://github.com/CobaltBSD/neosurf/archive/$_commit.tar.gz
"
#$pkgname-$pkgver.tar.gz::https://github.com/CobaltBSD/neosurf/releases/download/v$pkgver/neosurf-0.11.tar.gz

builddir="$srcdir"/$pkgname-$_commit

export CFLAGS="$CFLAGS -fcommon"

build() {
	mkdir -p build
	cd build
	cmake .. -DCMAKE_INSTALL_PREFIX="$pkgdir"/usr
	make -j1
}

#gtk3() {
#	amove /usr/bin/neosurf-gtk3
#	amove /usr/share/neosurf-gtk3
#}

package() {
	cd build
	make install
}


sha512sums="
7373d611334a5f514ac25700d158e3a31269896fac7881af42577a28137832b064593f356b1275539d3230deee618b726e181f6daa68b64643144e8d2d876df7  neosurf-433dafd46bc486bc8f5af93355787674d83105d0.tar.gz
"
